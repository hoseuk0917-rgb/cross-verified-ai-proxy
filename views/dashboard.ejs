<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>Admin Dashboard</title>
<link rel="stylesheet" href="/admin.css" />
<style>
  body {font-family:sans-serif;background:#f5f7fa;margin:40px;}
  button {padding:10px 20px;border:none;border-radius:6px;cursor:pointer;}
  .approve {background:#2b7cff;color:#fff;}
</style>
</head>
<body>
<h2>Cross-Verified AI Admin</h2>
<p>ğŸ‘¤ <%= user.name %> (<%= user.email %>)</p>

<!-- âœ… ì¶”ê°€ëœ ìŠ¹ì¸ ì„¹ì…˜ -->
<section>
  <h3>ì‹ ë¢°ë„ ë°ì´í„° ìŠ¹ì¸</h3>
  <form action="/admin/approve-reliability" method="post">
    <button type="submit" class="approve">ğŸ“ˆ media_reliability_pending.json ìŠ¹ì¸ ì ìš©</button>
  </form>
</section>

<section>
<h3>ì—”ì§„ í†µê³„</h3>
<table>
<tr><th>ì—”ì§„</th><th>í‰ê·  ì‹ ë¢°ë„</th><th>ì‘ë‹µ(ms)</th><th>ì´ ì‹¤í–‰</th><th>ê°±ì‹ ì¼</th></tr>
<% stats.forEach(s=>{ %>
<tr>
<td><%= s.engine_name %></td>
<td><%= s.avg_truth.toFixed(3) %></td>
<td><%= s.avg_response %></td>
<td><%= s.total_runs %></td>
<td><%= s.updated_at %></td>
</tr><% }) %>
</table>
</section>

<section>
<h3>ê°€ì¤‘ì¹˜ ì´ë ¥ (ìµœê·¼ 20íšŒ)</h3>
<table>
<tr><th>ì—”ì§„</th><th>ì‹ ë¢°ë„</th><th>ì‘ë‹µì‹œê°„</th><th>ì‹œê°„</th></tr>
<% history.forEach(h=>{ %>
<tr>
<td><%= h.engine %></td>
<td><%= h.truth.toFixed(3) %></td>
<td><%= h.response_time %></td>
<td><%= h.created_at %></td>
</tr><% }) %>
</table>
</section>

<section>
<h3>ìµœê·¼ ê²€ì¦ ë¡œê·¸</h3>
<table>
<tr><th>ì§ˆë¬¸</th><th>ëª¨ë“œ</th><th>ì‹ ë¢°ë„</th><th>ì—”ì§„</th><th>ì‹œê°„</th></tr>
<% logs.forEach(l=>{ %>
<tr>
<td><%= l.query %></td>
<td><%= l.mode %></td>
<td><%= l.truthscore ? l.truthscore.toFixed(3):'-' %></td>
<td><%= l.engines %></td>
<td><%= l.created_at %></td>
</tr><% }) %>
</table>
</section>
</body>
</html>
